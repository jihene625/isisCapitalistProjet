<div class="upgrades-overlay">
  <!-- Barre de titre -->
  <div class="upgrades-header">
    <!-- Icône Upgrades en haut à gauche -->
    <div class="upgrade-icon-container">
      <img src="assets/upgrade.png" alt="Upgrades" class="upgrade-icon" />
    </div>
    <div class="upgrades-title">
      <h2>{{ title }}</h2>
    </div>
    <!-- Bouton close en haut à droite -->
    <div class="upgrades-close" (click)="onClose()">
      <img src="assets/cross.png" alt="Close" />
    </div>
  </div>

  <div class="upgrades-content">
    <!-- Sélection du type d'upgrades -->
    <div class="upgrades-type-selection">
      <!-- Bouton "Cash" -->
      <div
        class="upgrade-type-button"
        [class.selected]="selectedTab === 'cash'"
        (click)="onSelectTab('cash')">
        <div class="type-image">
          <img src="assets/Cashh.png" alt="Cash" />
        </div>
        <div class="type-label">
          Cash upgrades
        </div>
      </div>
      <!-- Bouton "Patient" -->
      <div
        class="upgrade-type-button"
        [class.selected]="selectedTab === 'patient'"
        (click)="onSelectTab('patient')">
        <div class="type-image">
          <img src="assets/Investors.png" alt="Patient" />
        </div>
        <div class="type-label">
          Patient upgrades
        </div>
      </div>
    </div>

    <!-- Grille (ou liste) des upgrades -->
    <div class="upgrade-grid">
      <div class="upgrade-card-wrapper" *ngFor="let up of displayedUpgrades" (click)="onBuy(up)">
        <!-- Carte d'upgrade -->
        <div class="upgrade-card">
          <div class="upgrade-photo">
            <img [src]="'http://localhost:3000/icones/' + up.logo" alt="{{ up.name }}" />
          </div>
          <div class="upgrade-info">
            <h3 class="upgrade-name">{{ getProductName(up.idcible) }}</h3>
            <p class="upgrade-title">{{ up.name }} profit x{{up.ratio}}</p>
            <p class="upgrade-threshold">{{ up.seuil | number }}$</p>
          </div>
        </div>
        <!-- Bouton BUY (placé à droite du wrapper) -->
        <div class="upgrade-buy-button"
             [class.disabled]="!canBuy(up)"
             (click)="onBuy(up); $event.stopPropagation()">
          BUY!
        </div>
      </div>
    </div>
  </div>
</div>
